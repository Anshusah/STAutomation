@using Cicero.Service.Services
@using Cicero.Service.Models.JazzCash
@model DashboardViewModel
@inject Utils  _utils
@inject ICommonService _commonService
@{
    ViewData["body"] = "";
    ViewData["Title"] = "Transfer";
}
<link href="~/scrollable-tab plugin/jquery.scrolling-tabs.min.css" rel="stylesheet" />
<link href="~/flag-icon/css/flag-icon.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet" />

<div>
    <div class="vertical-layout">
        @await Html.PartialAsync("../Shared/_Header.cshtml")
        <main class="main-content" role="main">
            <input type="hidden" id="elmloggedinuser" name="elmloggedinuser" elm-name="elmloggedinuser" value="@_commonService.getLoggedInUserId()" />
            <div class="container dashboard-container">

                <div class="dashboard-content">
                    <div class="banner-hero">
                        <div class="user-info user-info-l">
                            <h5 class="mb-0">Good Evening</h5>
                            <h3>@(Model.FirstName + " " + Model.LastName)xyx xyx</h3>

                            <div class="user-info-item"><span class="label">Customer ID</span><h5>@Model.CustomerId 154881617</h5></div>
                        </div>

                        <div class="user-info user-info-r">
                            <div class="notification-content" onclick="location.href='@Url.Content("/jazzcash/payer/notifications")'">
                                <span class="notification-text">Notification</span>  <div class="notification-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30.272" height="30.853" viewBox="0 0 48.272 48.853">
                                        <g id="Group_2017" data-name="Group 2017" transform="translate(-1604.728 -267)">
                                            <g id="Bell-line" transform="translate(1583.395 268)">
                                                <path id="Path_4818" data-name="Path 4818" d="M162.145,424.972a7.485,7.485,0,0,1-7.477-7.477,1.5,1.5,0,1,1,2.991,0,4.486,4.486,0,1,0,8.972,0,1.5,1.5,0,1,1,2.991,0A7.485,7.485,0,0,1,162.145,424.972Zm0,0" transform="translate(-120.874 -377.12)" fill="#f4f5fa" />
                                                <path id="Path_4819" data-name="Path 4819" d="M57.72,99.89h-32.9a3.49,3.49,0,0,1-2.269-6.141,13.363,13.363,0,0,0,4.761-10.232V77.957a13.957,13.957,0,0,1,27.914,0v5.559a13.359,13.359,0,0,0,4.741,10.218A3.488,3.488,0,0,1,57.72,99.89Zm-16.449-32.9A10.978,10.978,0,0,0,30.3,77.957v5.559a16.341,16.341,0,0,1-5.8,12.5.5.5,0,0,0-.18.383.5.5,0,0,0,.5.5h32.9a.5.5,0,0,0,.5-.5.491.491,0,0,0-.176-.379,16.346,16.346,0,0,1-5.806-12.505V77.957A10.978,10.978,0,0,0,41.271,66.991Zm0,0" transform="translate(0 -58.019)" fill="#f4f5fa" />
                                                <path id="Path_4820" data-name="Path 4820" d="M220.163,8.972a1.5,1.5,0,0,1-1.5-1.5V1.5a1.5,1.5,0,1,1,2.991,0V7.477A1.5,1.5,0,0,1,220.163,8.972Zm0,0" transform="translate(-178.892)" fill="#f4f5fa" />
                                            </g>

                                        </g>
                                    </svg>
                                    <span class="notification-value">@Model.NotificationCount</span>
                                </div>
                            </div>
                            <div class="my-1"><span class="label">Local Time:</span> @Model.LocalTime <span class="value">18:52</span></div>
                            <div class="my-1"><span class="label">Last Visit:</span> @Model.LocalTime <span class="value">05/13/2020 12:03 EST</span></div>
                         
                        </div>
                    </div>
                </div>

                
                <div class="row mb-5">
                    <h5 class="title col-lg-12">Balances</h5>
                    <div class="col-md-4">
                        <div class="card widget-box ">
                            <div class="card-body widget-content">
                                <div class="widget-inner">
                                    <h2 class="count">20.00 USD</h2>
                                    <div class="widget-info">

                                        <div class="icon-wrapper">
                                            <i class="ri-bank-card-line ri-2x"></i>
                                        </div>
                                        <div class="ml-2 d-flex flex-column">
                                            <span>XXX-3804 - 500.00 USD</span>
                                            <span>Available on card</span>
                                        </div>
                                    </div>

                                </div>
                                <a href="" class="btn-sm  widget-link"> More Info <i class="ri-arrow-right-s-line"></i></a>


                            </div>
                        </div>

                    </div>
                    <div class="col-md-4">
                        <div class="card widget-box ">
                            <div class="card-body widget-content">
                                <div class="widget-inner">
                                    <h2 class="count">20.00 EUR</h2>
                                    <div class="widget-info">

                                        <div class="icon-wrapper">
                                            <i class="ri-bank-card-line ri-2x"></i>
                                        </div>
                                        <div class="ml-2 d-flex flex-column">
                                            <span>XXX-3804 - 500.00 USD</span>
                                            <span>Available on card</span>
                                        </div>
                                    </div>

                                </div>
                                <a href="" class="btn-sm  widget-link"> More Info <i class="ri-arrow-right-s-line"></i></a>


                            </div>
                        </div>

                    </div>
                    <div class="col-md-4">
                        <div class="card widget-box ">
                            <div class="card-body widget-content">
                                <div class="widget-inner">
                                    <h2 class="count">20.00 GBP</h2>
                                    <div class="widget-info">

                                        <div class="icon-wrapper">
                                            <i class="ri-bank-card-line ri-2x"></i>
                                        </div>
                                        <div class="ml-2 d-flex flex-column">
                                            <span>XXX-3804 - 500.00 USD</span>
                                            <span>Available on card</span>
                                        </div>
                                    </div>

                                </div>
                                <a href="" class="btn-sm  widget-link"> More Info <i class="ri-arrow-right-s-line"></i></a>


                            </div>
                        </div>

                    </div>

                </div>

                <div class="row pt-4">
                    <h5 class="mb-0 title d-block col-12">Payments Requested</h5>
                        <p class="d-block col-12">Updated every several minutes</p>
                        <div class="col-md-8">


                            <div class="widget-box  border-bottom-0">
                                <div class="widget-content">
                                    <div class="tab-wrapper">
                                        <div class="tabs">
                                            <ul class="nav nav-tabs nav-tabs-custom border-0">
                                                <li class="nav-item active"><a class="nav-link active show" data-toggle="tab" href="#latest">Home</a></li>
                                                <li class="nav-item"><a class="nav-link" data-toggle="tab" href="#upcoming">Upcoming</a></li>

                                            </ul>
                                        </div>
                                        <button class="btn btn-sm btn-link mr-3" onclick="location.href='@Url.Content("/jazzcash/payer/transactions")'">
                                            View All   <svg xmlns="http://www.w3.org/2000/svg" class="icon-arrow" width="8.5" height="8.5" viewBox="0 0 12.204 12.608">
                                                <g id="arrow" transform="translate(-4.57)">
                                                    <g id="Group_2030" data-name="Group 2030" transform="translate(4.57)">
                                                        <path id="Path_4827" data-name="Path 4827" d="M121.434,6.013,115.547.126a.4.4,0,0,0-.581,0l-.632.632a.4.4,0,0,0,0,.581L119.3,6.3l-4.965,4.965a.4.4,0,0,0,0,.581l.632.631a.4.4,0,0,0,.581,0l5.887-5.887a.4.4,0,0,0,0-.581Z" transform="translate(-109.357)" fill="#00b4f1" />
                                                        <path id="Path_4828" data-name="Path 4828" d="M11.922,6.3a.4.4,0,0,0-.126-.291L5.909.126a.4.4,0,0,0-.581,0L4.7.758a.4.4,0,0,0,0,.581L9.661,6.3,4.7,11.269a.4.4,0,0,0,0,.581l.632.631a.4.4,0,0,0,.581,0L11.8,6.595A.4.4,0,0,0,11.922,6.3Z" transform="translate(-4.57)" fill="#00b4f1" />
                                                    </g>
                                                </g>
                                            </svg>
                                        </button>

                                    </div>
                                    <div class="tab-content">
                                        <div id="latest" class="tab-pane  fade in active show">
                                            <ul class="list-transaction">
                                                <li class="list-transaction__item">
                                                    <div class="">
                                                        <span class="date"> 4 April 2020</span>
                                                    </div>
                                                    <div class="flex-grow-1 px-5 text-left">
                                                        <span class="name">Jhon Doe</span>
                                                    </div>
                                                    <div class="">
                                                        <div class="amount">--200.00 <span>USD</span></div>
                                                    </div>
                                                    <div class="mx-2"> <span class="badge badge-success font-weight-light">Received</span></div>
                                                    <div class="icon">
                                                        <i class="ri-arrow-right-s-line"></i>
                                                    </div>


                                                </li>
                                                <li class="list-transaction__item">
                                                    <div class="">
                                                        <span class="date"> 4 April 2020</span>
                                                    </div>
                                                    <div class="flex-grow-1 px-5 text-left">
                                                        <span class="name">Jhon Doe</span>
                                                    </div>
                                                    <div class="">
                                                        <div class="amount">200.00 <span>USD</span></div>
                                                    </div>
                                                    <div class="mx-2"> <span class="badge badge-warning font-weight-light">Pending</span></div>

                                                    <div class="icon">
                                                        <i class="ri-arrow-right-s-line"  ></i>
                                                    </div>
                                                </li>
                                                <li class="list-transaction__item">
                                                    <div class="">
                                                        <span class="date"> 4 April 2020</span>
                                                    </div>
                                                    <div class="flex-grow-1 px-5 text-left">
                                                        <span class="name">Jhon Doe</span>
                                                    </div>
                                                    <div class="">
                                                        <div class="amount">00.00 <span>USD</span></div>
                                                    </div>
                                                    <div class="mx-2 "> <span class="badge badge-success font-weight-light">Received</span></div>

                                                    <div class="icon">
                                                        <i class="ri-arrow-right-s-line " ></i>
                                                    </div>
                                                </li>
                                            </ul>

                                        </div>
                                        <div id="upcoming" class="tab-pane fade">
                                            <ul class="list-transaction">
                                                <li class="list-transaction__item">
                                                    <div class="">
                                                        <span class="date"> 4 April 2020</span>
                                                    </div>
                                                    <div class="flex-grow-1 px-5 text-left">
                                                        <span class="name">Jhon Doe</span>
                                                    </div>
                                                    <div class="">
                                                        <div class="amount">--200.00 <span>USD</span></div>
                                                    </div>
                                                    <div class="icon">
                                                        <i class="ri-arrow-right-s-line"  ></i>
                                                    </div>
                                                </li>
                                                <li class="list-transaction__item">
                                                    <div class="">
                                                        <span class="date"> 4 April 2020</span>
                                                    </div>
                                                    <div class="flex-grow-1 px-5 text-left">
                                                        <span class="name">Jhon Doe</span>
                                                    </div>
                                                    <div class="">
                                                        <div class="amount">--200.00 <span>USD</span></div>
                                                    </div>
                                                    <div class="icon">
                                                        <i class="ri-arrow-right-s-line "></i>
                                                    </div>
                                                </li>
                                                <li class="list-transaction__item">
                                                    <div class="">
                                                        <span class="date"> 4 April 2020</span>
                                                    </div>
                                                    <div class="flex-grow-1 px-5 text-left">
                                                        <span class="name">Jhon Doe</span>
                                                    </div>
                                                    <div class="">
                                                        <div class="amount">--200.00 <span>USD</span></div>
                                                    </div>
                                                    <div class=" icon">
                                                        <i class="ri-arrow-right-s-line"  ></i>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>

                                    </div>
                                    @*<div class="table-wapper">
                        <table id="paymentsrequest" class="table table-hover table-custom table-responsive"></table>
                    </div>*@
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="widget-box border-0">
                                <div class="widget-content">
                                    <div class="widget-body">
                                        <div class="widget-inner">
                                            <h5 class="title">Time To Get Paid</h5>
                                            <p class="mb-4">
                                                Request payments from clients all
                                                over the world and get paid from your
                                                services.
                                            </p>
                                            <div class="my-3">
                                                <button type="button" class="btn btn-outline-primary btn-block d-inline-flex align-items-center justify-content-center">
                                                    Request a payment
                                                    &#187;
                                                    @*<svg xmlns="http://www.w3.org/2000/svg" class="hover-white" width="12.204" height="12.608" viewBox="0 0 12.204 12.608">
            <g id="arrow" transform="translate(-4.57)">
                <g id="Group_2030" data-name="Group 2030" transform="translate(4.57)">
                    <path id="Path_4827" data-name="Path 4827" d="M121.434,6.013,115.547.126a.4.4,0,0,0-.581,0l-.632.632a.4.4,0,0,0,0,.581L119.3,6.3l-4.965,4.965a.4.4,0,0,0,0,.581l.632.631a.4.4,0,0,0,.581,0l5.887-5.887a.4.4,0,0,0,0-.581Z" transform="translate(-109.357)" fill="#00b4f1" />
                    <path id="Path_4828" data-name="Path 4828" d="M11.922,6.3a.4.4,0,0,0-.126-.291L5.909.126a.4.4,0,0,0-.581,0L4.7.758a.4.4,0,0,0,0,.581L9.661,6.3,4.7,11.269a.4.4,0,0,0,0,.581l.632.631a.4.4,0,0,0,.581,0L11.8,6.595A.4.4,0,0,0,11.922,6.3Z" transform="translate(-4.57)" fill="#00b4f1" />
                </g>
            </g>
        </svg>*@



                                                </button>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>

</div>
            </div>
        </main>

        @await Html.PartialAsync("../Shared/_Footer.cshtml")

    </div>
</div>

<script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/select/1.3.1/js/dataTables.select.min.js"></script>
<script type="text/javascript" src="//gyrocode.github.io/jquery-datatables-checkboxes/1.2.11/js/dataTables.checkboxes.min.js"></script>
<script src="~/scrollable-tab plugin/jquery.scrolling-tabs.min.js"></script>
<script src="~/js/simpleTransfer.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>


<script type="text/javascript">
    var paymentDetails = @Html.Raw(Json.Serialize(Model.PaymentDetails));
    $(document).ready(function () {
        var table = jQuery("#paymentsrequest");
        table.dataTable({
            data: paymentDetails,
            "columns": [
                { "title": "Latest", "data": "date", "orderable": true },
                { "title": "Payer Name", "data": "payerName", "orderable": true },
                {
                    "title": "Amount", "data": null, "orderable": false,
                    'render': function (data) {
                        if (data.amount == null) {
                            data.amount = "0";
                        }

                         if (data.currency == null) {
                            data.currency = "GBP";
                        }

                        var amount = data.amount + " " + data.currency;
                        return amount;
                    }
                },
                {
                    "title": "Status", "data": null, "orderable": false,
                    'render': function (data) {
                        if (data.status == null) {
                            data.status = "";
                        }
                        //var content = data.content.length > 100 ? data.content.substr(0, data.content.lastIndexOf(' ', 100)) : data.content;
                        var content = data.status;
                        if (content == "1") {
                            return "<span class='badge badge-warning badge-pill'>Pending</span>";
                        }
                        else if (content == "2") {
                            return "<span class='badge badge-info badge-pill'>InProgress</span>";
                        }
                        else {
                            return "<span class='badge badge-success badge-pill'>Received</span>"
                        }
                    }
                }
            ],
            'order': [
                [1, "asc"]
            ],
            'paging': true,
            'pageLength': 10,
            'lengthMenu': [
                [5, 10, 20, 50, 100, 500], [5, 10, 20, 50, 100, 500]
            ],
            'fnInitComplete': function (oSettings, json) {
                jQuery("#users").css({ "display": "table" }).animate({ "opacity": 1 }, 500);
            },
        });

        jQuery(document).on("keyup", "#gridsearch", function () {
            console.log(this.value);
            table.fnFilter(this.value);
        });
    });
</script>

